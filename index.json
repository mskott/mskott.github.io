[{"content":"","date":null,"permalink":"/tags/2fa/","section":"Tags","summary":"","title":"2fa"},{"content":"","date":null,"permalink":"/tags/fedora/","section":"Tags","summary":"","title":"fedora"},{"content":"","date":null,"permalink":"/tags/git/","section":"Tags","summary":"","title":"git"},{"content":"SSH keys have, for a long time, been the preferred method of authentication when using Git with remote repositories. These days, with increased security awareness, many organisations are requiring some variant of multi-factor authentication for all services - Git included.\nGitHub has announced1 that they are taking it one step further, and will require that all users contributing code enable one or more forms of two-factor authentication (2FA) by the end of 2023.\nThat leaves Git users with a problem as SSH keys can\u0026rsquo;t be combined with 2FA. Instead users can create a personal access token and input it as their password, but that is cumbersome and requires managing personal access tokens in a secure way.\nThankfully there are several solutions to solve this issue, without compromising security ðŸ˜€\ngit-credential-oauth # One option on Linux is git-credential-oauth which is a credential helper for Git which uses OAuth to securely authenticate to a bunch of popular Git hosts. It requires very little setup to get running, and once done it will open your preferred browser every time Git needs to authenticate with a remote repository. The retrieved token is cached automatically so it won\u0026rsquo;t open a browser window all the time.\nThe motivation section of the git-credential-oauth README2 file provides a nice comparison between it and other solutions like SSH and personal access tokens.\nInstalling and configuring git-credential-oauth is easy. The steps below are based on Fedora, but should be similar on any other Linux distribution.\nInstall the package using dnf install git-credential-oauth Run git credential-oauth configure to configure Git Step 2 will update your ~/.gitconfig to include the lines below - you could also add them yourself if you don\u0026rsquo;t want others meddling with your Git configuration.\n[credential] helper = cache --timeout 7200 helper = oauth Not all systems have have a browser though, so git-credential-oath also supports3 the OAuth device flow4. I have yet to try it out, but setup looks very simple.\nGit Credential Manager Core # Another solution comes from Microsoft and is called Git Credential Manager Core5 - replacing a previous tool called Git Credential Manager for Windows. Git Credential Manager Core is written in .Net and supposedly runs fine on Linux, but it only available a .deb package or as a tarball and isn\u0026rsquo;t available in the Fedora repositories.\nGit Credential Manager Core does have extra support for Azure so it might be worth a look if that is your choice of cloud solution.\nI have used Git Credential Manager Core on Windows where it works very well and even integrates into WSL2. I remember struggling a bit setting it up with WSL2, but got it working in the end. Can\u0026rsquo;t remember what I had to do and the machine has been returned to the client, but I hope that documentation has been updated should I ever need it again ðŸ˜€\nRaising the bar for software security: next steps for GitHub.com 2FA\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nhttps://github.com/hickford/git-credential-oauth#motivation\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nhttps://github.com/hickford/git-credential-oauth#browserless-systems\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nRFC-8628-OAuth 2.0 Device Authorization Grant\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nGit Credential Manager Core\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n","date":"8 December 2023","permalink":"/posts/2023/git-with-2fa-on-linux/","section":"Posts","summary":"SSH keys have, for a long time, been the preferred method of authentication when using Git with remote repositories.","title":"Git With 2FA on Linux"},{"content":"","date":null,"permalink":"/tags/github/","section":"Tags","summary":"","title":"github"},{"content":"","date":null,"permalink":"/tags/linux/","section":"Tags","summary":"","title":"linux"},{"content":"","date":null,"permalink":"/","section":"Martin SkÃ¸tt","summary":"","title":"Martin SkÃ¸tt"},{"content":"","date":null,"permalink":"/posts/","section":"Posts","summary":"","title":"Posts"},{"content":"","date":null,"permalink":"/tags/","section":"Tags","summary":"","title":"Tags"},{"content":"","date":null,"permalink":"/tags/windows/","section":"Tags","summary":"","title":"windows"},{"content":"","date":null,"permalink":"/tags/wsl2/","section":"Tags","summary":"","title":"wsl2"},{"content":"","date":null,"permalink":"/tags/backup/","section":"Tags","summary":"","title":"backup"},{"content":"","date":null,"permalink":"/tags/borg/","section":"Tags","summary":"","title":"borg"},{"content":"","date":null,"permalink":"/tags/borgbase/","section":"Tags","summary":"","title":"borgbase"},{"content":"","date":null,"permalink":"/tags/debian/","section":"Tags","summary":"","title":"debian"},{"content":"For the last six years I have been using a backup product called SpiderOak One which puts a large focus on privacy - it even got a recommendation from Edward Snowden. SpiderOak has since shifted their focus away from backup, and their closed-source client hasn\u0026rsquo;t seen an update since 2019. They haven\u0026rsquo;t discontinued the product, but it obviously doesn\u0026rsquo;t have their focus any longer.\nFinding a replacement has been on my todo list for a while, and I have looked at various tools but never gotten further than looking. Listening to episode 9 of the Linux Matters podcast titled Big Backup Bonanza gave me some much needed motivation to go further.\nRequirements # While I hadn\u0026rsquo;t tried out any new backup tools, I had made a list of loose requirements which my new backup solution should satisfy.\nMust have an open-source Linux client. Preferably packaged in the official repos of Fedora and Debian. Backups must be stored off-site, on a service I don\u0026rsquo;t have to run since I\u0026rsquo;d prefer to not be a sysadmin in my spare time. Preferably multiple providers of off-site locations to choose from. Data should be stored in the EU. Not out of paranoia, but because I like not having everything in the US. My wife runs Windows on her laptop and stores all her data in the cloud, and since I only have Linux machines support for other platforms isn\u0026rsquo;t a requirement.\nBorg Backup # One of the tools mentioned by the Linux Matters hosts was Borg Backup, which I had also seen positive mentions of in other places.\nBorg is released under the BSD license, and packages are available in the official repos of both Fedora and Debian. There are several service providers which support Borg, including well-known companies like Hetzner and rsync.net. I ended up creating a trial account with BorgBase which operates out of Malta and allows you to choose between storing your data in the EU or the United States. The same people who are behind BorgBase also behind the GUI client Vorta which, again, is available in both Fedora and Debian.\nGetting it all setup with Vorta and a trial account on BorgBase took around 30 minutes before I was ready to begin adding folders to Vorta\u0026rsquo;s list of sources to back up. Vorta offers lots of options to schedule backups, but for now I have mostly stuck with the defaults. Only settings I made sure to check were to start Vorta automatically on login and to run missed backups on startup as I don\u0026rsquo;t leave my laptop running 24/7.\nBorgBase provides a monitoring feature where it alerts you if a repository hasn\u0026rsquo;t seen a new backup within a certain period. This is a simple solution to the problem of alerting you if your backup program for some reason is failing to run.\nNext steps\u0026hellip; # There is nothing more useless than an untested backup so that is an obvious next step. Vorta\u0026rsquo;s documentation includes a nice guide on how to verify your backup which I will also need to take a closer look at. For now I have backed up about 7,5GB of files to BorgBase, but have yet to try restoring them on another system.\nI would also like to take a look at Borgmatic which looks like a very simple method of running Borg backups from the command-line. Could be useful on a server where Vorta wouldn\u0026rsquo;t be of much help.\n","date":"6 November 2023","permalink":"/posts/2023/how-i-do-backups/","section":"Posts","summary":"For the last six years I have been using a backup product called SpiderOak One which puts a large focus on privacy - it even got a recommendation from Edward Snowden.","title":"How I Do Backups"},{"content":"","date":null,"permalink":"/tags/spideroak/","section":"Tags","summary":"","title":"spideroak"},{"content":"","date":null,"permalink":"/tags/vorta/","section":"Tags","summary":"","title":"vorta"},{"content":"","date":null,"permalink":"/tags/authselect/","section":"Tags","summary":"","title":"authselect"},{"content":"Gnome Boxes and Virtual Machine Manager are great tools for running virtual machines on Linux. Both are using the libvirt API to run and manage the virtual machines. This doesn\u0026rsquo;t just make the two tools interoperable, but also opens up for working with the entire ecosystem of utilities around libvirt and libguestfs allowing for endless automation of virtual machines.\nA common use-case for me is to run headless VMs and then use SSH to connect to them. Out of the box on Fedora I have to use the IP address of the VM to connect to it, which is a hassle. libvirt comes with the libvirt-nss module which plugs in to the hosts name resolution, and extends it to dynamically resolve hostnames and guest names. It even works inside of your guest VMs allowing them to lookup other guests without using IP addresses.\nInstallation is really simple, but the configuration is a little different on Fedora which uses authselect(8) to manage /etc/nsswitch.conf and related files. Below is a simple how-to describing how I got it working on Fedora 38.\nHow-to # Install the module: dnf install libvirt-nss Enable the feature in authselect: $ authselect enable-feature with-libvirt Make sure that SSSD service is configured and enabled. See SSSD documentation for more information. - with-libvirt is selected, make sure that the libvirt NSS plugins are installed ","date":"22 September 2023","permalink":"/posts/2023/libvirt-nss/","section":"Posts","summary":"Gnome Boxes and Virtual Machine Manager are great tools for running virtual machines on Linux.","title":"Configuring libvirt guest lookup on Fedora"},{"content":"","date":null,"permalink":"/tags/libvirt/","section":"Tags","summary":"","title":"libvirt"},{"content":"","date":null,"permalink":"/tags/blogging/","section":"Tags","summary":"","title":"blogging"},{"content":"It\u0026rsquo;s 2023 and I have started a blog!\nI have previously made several half-hearted attempts, but none that really took of (as in me actually posting something).\nWhy now? # Writing has always been something I enjoyed doing, but since I left school most of my writing has been work related. Some of my writing here is probably going to resemble work quite a lot, but lets see where it goes. At least I\u0026rsquo;m not trying to sell anything to anyone here ðŸ˜€\nI would also like to work on my writing - not only to improve my communication, but also to improve my English. Although I have lived in both Ireland and the United Kingdom, and speak English on a daily basis I still feel there is room for improvement.\nWho is the reader? # Myself mostly, but I wouldn\u0026rsquo;t mind if others would read my posts. Maybe even find a morsel or two of useful information.\nInspiration # Two people who have inspired me to begin blogging are Julia Evans and Major Hayden. Both make some really good points, and Major really puts it into plain language:\nWrite for you â€“ not for anyone else.\nThere you have it, lets see how long it lasts ðŸ˜€\n","date":"6 September 2023","permalink":"/posts/2023/first-post/","section":"Posts","summary":"My first post with an explanation to why I begin blogging in 2023.","title":"First Post"},{"content":"","date":null,"permalink":"/tags/introduction/","section":"Tags","summary":"","title":"introduction"},{"content":"","date":null,"permalink":"/tags/writing/","section":"Tags","summary":"","title":"writing"},{"content":"","date":null,"permalink":"/categories/","section":"Categories","summary":"","title":"Categories"}]